## API Report File for "@contember/react-uploader"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { ComponentType } from 'react';
import { Context } from 'react';
import { EntityAccessor } from '@contember/binding';
import type { Environment } from '@contember/binding';
import { Environment as Environment_2 } from '@contember/react-binding';
import { ErrorAccessor } from '@contember/binding';
import { ErrorAccessorHolder } from '@contember/binding';
import { GenerateUploadUrlMutationBuilder } from '@contember/client';
import { GraphQlClient } from '@contember/graphql-client';
import { JSX as JSX_2 } from 'react/jsx-runtime';
import { JSXElementConstructor } from 'react';
import { NamedExoticComponent } from 'react';
import { ReactElement } from 'react';
import { ReactNode } from 'react';
import { SugaredRelativeSingleEntity } from '@contember/react-binding';
import { SugaredRelativeSingleEntity as SugaredRelativeSingleEntity_2 } from '@contember/binding';
import { SugaredRelativeSingleField } from '@contember/binding';
import { SugaredRelativeSingleField as SugaredRelativeSingleField_2 } from '@contember/react-binding';

// @public (undocumented)
export type AfterUploadEvent = {
    file: FileWithMeta;
    result: FileUploadResult;
    fileType: FileType;
};

// @public (undocumented)
export type AnyFileTypeProps = FileType & FileUrlDataExtractorProps & GenericFileMetadataExtractorProps;

// @public (undocumented)
export interface AudioFileDataExtractorProps {
    // (undocumented)
    durationField?: SugaredRelativeSingleField_2['field'];
}

// @public (undocumented)
export type AudioFileTypeProps = FileType & FileUrlDataExtractorProps & GenericFileMetadataExtractorProps & AudioFileDataExtractorProps;

// @public (undocumented)
export type BeforeUploadEvent = {
    file: FileWithMeta;
    reject: (reason: string) => never;
};

// @public (undocumented)
export const createAnyFileType: ({ fileSizeField, fileTypeField, lastModifiedField, fileNameField, urlField, uploader, extractors, acceptFile, accept, }: AnyFileTypeProps) => FileType;

// @public (undocumented)
export const createAudioFileType: ({ durationField, fileSizeField, fileTypeField, lastModifiedField, fileNameField, urlField, uploader, extractors, acceptFile, accept, }: AudioFileTypeProps) => FileType;

// @public (undocumented)
export const createImageFileType: ({ uploader, urlField, fileSizeField, fileTypeField, lastModifiedField, fileNameField, heightField, widthField, accept, acceptFile, extractors, }: ImageFileTypeProps) => FileType;

// @public (undocumented)
export const createVideoFileType: ({ urlField, durationField, fileSizeField, fileTypeField, lastModifiedField, fileNameField, heightField, widthField, extractors, acceptFile, accept, uploader, }: VideoFileTypeProps) => FileType;

// @public (undocumented)
export type DiscriminatedFileType = FileType & {
    baseField?: SugaredRelativeSingleEntity['field'];
};

// @public (undocumented)
export type DiscriminatedFileTypeMap = Record<string, DiscriminatedFileType>;

// @public (undocumented)
export const DiscriminatedUploader: NamedExoticComponent<DiscriminatedUploaderProps>;

// @public (undocumented)
export type DiscriminatedUploaderProps = {
    baseField?: SugaredRelativeSingleEntity['field'];
    discriminatorField: SugaredRelativeSingleField['field'];
    children: ReactNode;
    types: DiscriminatedFileTypeMap;
};

// @public (undocumented)
type ErrorEvent_2 = {
    file: FileWithMeta;
    error: unknown;
    fileType?: FileType;
};
export { ErrorEvent_2 as ErrorEvent }

// @public (undocumented)
export interface FileDataExtractor {
    // (undocumented)
    extractFileData?: (options: FileWithMeta) => Promise<FileDataExtractorPopulator | undefined> | FileDataExtractorPopulator | undefined;
    // (undocumented)
    getErrorsHolders?: (options: FileDataExtractorGetErrorsOptions) => ErrorAccessorHolder[];
    // (undocumented)
    populateFields?: (options: {
        entity: EntityAccessor;
        result: FileUploadResult;
    }) => void;
    // (undocumented)
    staticRender: (options: FileDataExtractorStaticRenderOptions) => ReactNode;
}

// @public (undocumented)
export interface FileDataExtractorGetErrorsOptions {
    // (undocumented)
    entity: EntityAccessor;
    // (undocumented)
    environment: Environment;
}

// @public (undocumented)
export type FileDataExtractorPopulator = (options: {
    entity: EntityAccessor;
    result: FileUploadResult;
}) => void;

// @public (undocumented)
export interface FileDataExtractorStaticRenderOptions {
    // (undocumented)
    environment: Environment;
}

// @public (undocumented)
export interface FileType {
    // (undocumented)
    accept?: Record<string, string[]> | undefined;
    // Warning: (ae-unresolved-link) The @link reference could not be resolved: The package "@contember/react-uploader" does not have an export "RejectFileError"
    acceptFile?: ((file: FileWithMeta) => boolean | Promise<void>) | undefined;
    // (undocumented)
    extractors?: FileDataExtractor[];
    // (undocumented)
    uploader?: UploadClient<any>;
}

// @public (undocumented)
export interface FileUploadHandler<FileOptions = {}, Result extends FileUploadResult = FileUploadResult> {
    // (undocumented)
    getErrorsHolders: (args: FileUploadHandlerGetErrorHoldersArgs) => ErrorAccessorHolder[];
    // (undocumented)
    populateEntity: (args: FileUploadHandlerPopulateEntityArgs) => void;
    // (undocumented)
    staticRender: (args: FileUploadHandlerStaticRenderArgs) => React.ReactNode;
}

// @public (undocumented)
export interface FileUploadHandlerGetErrorHoldersArgs {
    // (undocumented)
    entity: EntityAccessor;
    // (undocumented)
    environment: Environment_2;
}

// @public (undocumented)
export interface FileUploadHandlerPopulateEntityArgs<Result extends FileUploadResult = FileUploadResult> {
    // (undocumented)
    entity: EntityAccessor;
    // (undocumented)
    uploadResult: Result;
}

// @public (undocumented)
export interface FileUploadHandlerStaticRenderArgs {
    // (undocumented)
    environment: Environment_2;
}

// @public (undocumented)
export interface FileUploadProgress {
    // (undocumented)
    progress: number;
    // (undocumented)
    totalBytes: number;
    // (undocumented)
    uploadedBytes: number;
}

// @public (undocumented)
export interface FileUploadResult {
    // (undocumented)
    publicUrl: string;
}

// @public (undocumented)
export interface FileUrlDataExtractorProps {
    // (undocumented)
    urlField: SugaredRelativeSingleField_2['field'];
}

// @public (undocumented)
export type FileWithMeta = {
    id: string;
    file: File;
    previewUrl: string;
    abortController: AbortController;
};

// @public (undocumented)
export interface GenericFileMetadataExtractorProps {
    // (undocumented)
    fileNameField?: SugaredRelativeSingleField_2['field'];
    // (undocumented)
    fileSizeField?: SugaredRelativeSingleField_2['field'];
    // (undocumented)
    fileTypeField?: SugaredRelativeSingleField_2['field'];
    // (undocumented)
    lastModifiedField?: SugaredRelativeSingleField_2['field'];
}

// @public (undocumented)
export const getAudioFileDataExtractor: (props: AudioFileDataExtractorProps) => FileDataExtractor;

// @public (undocumented)
export const getFileUrlDataExtractor: (props: FileUrlDataExtractorProps) => FileDataExtractor;

// @public (undocumented)
export const getGenericFileMetadataExtractor: (props: GenericFileMetadataExtractorProps) => FileDataExtractor;

// @public (undocumented)
export const getImageFileDataExtractor: (props: ImageFileDataExtractorProps) => FileDataExtractor;

// @public (undocumented)
export const getVideoFileDataExtractor: (props: VideoFileDataExtractorProps) => FileDataExtractor;

// @public (undocumented)
export interface ImageFileDataExtractorProps {
    // (undocumented)
    heightField?: SugaredRelativeSingleField_2['field'];
    // (undocumented)
    widthField?: SugaredRelativeSingleField_2['field'];
}

// @public (undocumented)
export type ImageFileTypeProps = FileType & FileUrlDataExtractorProps & GenericFileMetadataExtractorProps & ImageFileDataExtractorProps;

// @public (undocumented)
export const MultiUploader: NamedExoticComponent<MultiUploaderProps>;

// @public (undocumented)
export type MultiUploaderProps = UploaderBaseFieldProps & {
    fileType: FileType;
    children?: ReactNode;
};

// @public (undocumented)
type ProgressEvent_2 = {
    file: FileWithMeta;
    progress: FileUploadProgress;
    fileType: FileType;
};
export { ProgressEvent_2 as ProgressEvent }

// @public (undocumented)
export interface S3FileOptions {
    // (undocumented)
    acl?: GenerateUploadUrlMutationBuilder.Acl;
    // (undocumented)
    contentType?: GenerateUploadUrlMutationBuilder.FileParameters['contentType'];
    // (undocumented)
    expiration?: number;
    // (undocumented)
    extension?: string;
    // (undocumented)
    fileName?: string;
    // (undocumented)
    prefix?: string;
    // (undocumented)
    size?: number;
    // (undocumented)
    suffix?: string;
}

// @public (undocumented)
export class S3UploadClient implements UploadClient<S3FileOptions> {
    constructor(contentApiClient: GraphQlClient, options?: S3UploadClientOptions);
    // (undocumented)
    readonly options: S3UploadClientOptions;
    // (undocumented)
    upload({ file, signal, onProgress, ...options }: UploadClientUploadArgs & S3FileOptions): Promise<{
        publicUrl: string;
    }>;
}

// @public (undocumented)
export interface S3UploadClientOptions {
    // (undocumented)
    concurrency?: number;
    // (undocumented)
    getUploadOptions?: (file: File) => S3FileOptions;
}

// @public (undocumented)
export type StartUploadEvent = {
    file: FileWithMeta;
    fileType: FileType;
};

// @public (undocumented)
export type SuccessEvent = {
    file: FileWithMeta;
    result: FileUploadResult;
    fileType: FileType;
};

// @public (undocumented)
export interface UploadClient<Options, // contains file-specific options
Result extends FileUploadResult = FileUploadResult> {
    // (undocumented)
    upload: (args: UploadClientUploadArgs & Omit<Options, keyof UploadClientUploadArgs>) => Promise<Result>;
}

// @public (undocumented)
export interface UploadClientUploadArgs {
    // (undocumented)
    file: File;
    // (undocumented)
    onProgress: (progress: FileUploadProgress) => void;
    // (undocumented)
    signal: AbortSignal;
}

// @public (undocumented)
export const Uploader: NamedExoticComponent<UploaderProps>;

// @public (undocumented)
export const UploaderBase: NamedExoticComponent<UploaderBaseProps>;

// @public (undocumented)
export type UploaderBaseFieldProps = {
    baseField?: SugaredRelativeSingleEntity_2['field'];
};

// @public (undocumented)
export type UploaderBaseProps = UploaderBaseFieldProps & {
    children: ReactNode;
};

// @public (undocumented)
export const UploaderClientContext: Context<UploadClient<any, FileUploadResult> | null>;

// @public (undocumented)
export const UploaderEachFile: ({ children, state, fallback }: {
    children: ReactNode;
    state?: UploaderFileState['state'] | UploaderFileState['state'][];
    fallback?: ReactNode;
}) => JSX_2.Element;

// @public (undocumented)
export class UploaderError extends Error {
    constructor(options: UploaderErrorOptions);
    // (undocumented)
    readonly options: UploaderErrorOptions;
}

// @public (undocumented)
export interface UploaderErrorOptions {
    // (undocumented)
    developerMessage?: string;
    // (undocumented)
    endUserMessage?: string;
    // (undocumented)
    error?: unknown;
    // (undocumented)
    type: UploaderErrorType;
}

// @public (undocumented)
export const UploaderErrorsContext: Context<ErrorAccessor.Error[]>;

// @public (undocumented)
export type UploaderErrorType = 'fileRejected' | 'networkError' | 'httpError' | 'aborted' | 'timeout';

// @public (undocumented)
export type UploaderEvents = {
    onBeforeUpload?: (event: BeforeUploadEvent) => Promise<FileType | undefined>;
    onStartUpload?: (event: StartUploadEvent) => void;
    onProgress?: (event: ProgressEvent_2) => void;
    onAfterUpload?: (event: AfterUploadEvent) => Promise<void> | void;
    onSuccess?: (event: SuccessEvent) => void;
    onError?: (event: ErrorEvent_2) => void;
};

// @public (undocumented)
export type UploaderFileState = UploaderFileStateInitial | UploaderFileStateUploading | UploaderFileStateFinalizing | UploaderFileStateSuccess | UploaderFileStateError;

// @public (undocumented)
export const UploaderFileStateContext: Context<UploaderFileState>;

// @public (undocumented)
export type UploaderFileStateError = {
    state: 'error';
    file: FileWithMeta;
    error: unknown;
    dismiss: () => void;
};

// @public (undocumented)
export type UploaderFileStateFinalizing = {
    state: 'finalizing';
    file: FileWithMeta;
    result: FileUploadResult;
};

// @public (undocumented)
export type UploaderFileStateInitial = {
    state: 'initial';
    file: FileWithMeta;
};

// @public (undocumented)
export type UploaderFileStateSuccess = {
    state: 'success';
    file: FileWithMeta;
    result: FileUploadResult;
    dismiss: () => void;
};

// @public (undocumented)
export const UploaderFileStateSwitch: (props: UploaderFileStateSwitchProps) => ReactElement<any, string | JSXElementConstructor<any>> | null;

// @public (undocumented)
export interface UploaderFileStateSwitchProps {
    // (undocumented)
    error?: ReactElement | ComponentType<UploaderFileStateError>;
    // (undocumented)
    finalizing?: ReactElement | ComponentType<UploaderFileStateFinalizing>;
    // (undocumented)
    initial?: ReactElement | ComponentType<UploaderFileStateInitial>;
    // (undocumented)
    success?: ReactElement | ComponentType<UploaderFileStateSuccess>;
    // (undocumented)
    uploading?: ReactElement | ComponentType<UploaderFileStateUploading>;
}

// @public (undocumented)
export type UploaderFileStateUploading = {
    state: 'uploading';
    file: FileWithMeta;
    progress: FileUploadProgress;
};

// @public (undocumented)
export const UploaderHasFile: ({ children, state, fallback }: {
    children: ReactNode;
    fallback?: ReactNode;
    state?: UploaderFileState['state'] | UploaderFileState['state'][];
}) => JSX_2.Element;

// @public (undocumented)
export interface UploaderOptions {
    // (undocumented)
    accept: {
        [key: string]: string[];
    } | undefined;
    // (undocumented)
    multiple: boolean;
}

// @public (undocumented)
export const UploaderOptionsContext: Context<UploaderOptions>;

// @public (undocumented)
export type UploaderProps = UploaderBaseFieldProps & {
    fileType: FileType;
    children?: ReactNode;
};

// @public (undocumented)
export type UploaderState = UploaderFileState[];

// @public (undocumented)
export const UploaderStateContext: Context<UploaderState>;

// @public (undocumented)
export const UploaderUploadFilesContext: Context<(files: File[]) => void>;

// @public (undocumented)
export const useS3Client: () => S3UploadClient;

// @public (undocumented)
export const useUploaderClient: () => UploadClient<any, FileUploadResult> | null;

// @public (undocumented)
export const useUploaderErrors: () => ErrorAccessor.Error[];

// @public (undocumented)
export const useUploaderFileState: () => UploaderFileState;

// @public (undocumented)
export const useUploaderOptions: () => UploaderOptions;

// @public (undocumented)
export const useUploaderState: () => UploaderState;

// @public (undocumented)
export const useUploaderStateFiles: ({ state }?: UseUploaderStateFilesArgs) => UploaderState;

// @public (undocumented)
export type UseUploaderStateFilesArgs = {
    state?: UploaderFileState['state'] | UploaderFileState['state'][];
};

// @public (undocumented)
export const useUploaderUploadFiles: () => (files: File[]) => void;

// @public (undocumented)
export interface VideoFileDataExtractorProps {
    // (undocumented)
    durationField?: SugaredRelativeSingleField_2['field'];
    // (undocumented)
    heightField?: SugaredRelativeSingleField_2['field'];
    // (undocumented)
    widthField?: SugaredRelativeSingleField_2['field'];
}

// @public (undocumented)
export type VideoFileTypeProps = FileType & FileUrlDataExtractorProps & GenericFileMetadataExtractorProps & VideoFileDataExtractorProps;

// (No @packageDocumentation comment for this package)

```
