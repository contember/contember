---
title: BlockEditorField
sidebar_label: BlockEditorField
---

## BlockEditorField

### Overview
BlockEditorField is a rich‑text editor that lets you create structured content with drag‑and‑drop blocks.  
It integrates Slate.js, supports entity references, and exposes an extensible plugin system.

The component stores your content in one field, references in another, and discriminates reference types through a third field. It handles collision detection and measurements for smooth block reordering.

### Styling Guidelines
* All examples use Tailwind classes.  
* The editor itself needs no special Contember theme classes out of the box.

### Core Concepts
* **Blocks** – Self‑contained content chunks like images or quotes.  
* **Entity references** – Links to other entities stored in `referencesField`.  
* **Discrimination field** – Distinguishes reference types (`referenceDiscriminationField`).  
* **Plugins** – Extend the editor with custom elements or marks.  
* **Toolbars** – Inline and block toolbars expose triggers for marks, elements, and references.  
* **Drag‑and‑drop** – Reorder blocks visually; order is saved automatically.

### Quick Start
```tsx
import {
	BlockEditorField,
	EditorBlock,
	EditorBlockToolbar,
	EditorReferenceTrigger,
	BlockButton,
} from '~/lib/editor'
import { ImageIcon } from '@radix-ui/react-icons'

export const ArticleEditor = () => (
	<BlockEditorField
		field="data"
		referencesField="references"
		referenceDiscriminationField="type"
		className="prose w-full"
	>
		<EditorBlockToolbar className="flex gap-2 pb-2 border-b">
			<EditorReferenceTrigger referenceType="image">
				<BlockButton className="flex items-center gap-1">
					<ImageIcon className="h-4 w-4" /> Image
				</BlockButton>
			</EditorReferenceTrigger>
		</EditorBlockToolbar>

		<EditorBlock name="image" label="Image">
			{/* Replace with your ImageField */}
			<div className="border p-4 text-center italic text-gray-500">
				Image goes here…
			</div>
		</EditorBlock>
	</BlockEditorField>
)
```

### Detailed Guide
#### Adding custom plugins
```tsx
<BlockEditorField
	field="data"
	referencesField="references"
	referenceDiscriminationField="type"
	plugins={[
		editor => {
			editor.registerElement({
				type: 'link',
				isInline: true,
				render: LinkElement,
			})
		},
	]}
>
	{/* toolbars & blocks */}
</BlockEditorField>
```
* Register an element or mark inside the `plugins` array.  
* Each function receives the Slate editor instance.

#### Separating inline and block toolbars
```tsx
<EditorBlockToolbar className="flex gap-2 border-b pb-2">
	{/* block‑level triggers */}
</EditorBlockToolbar>

<EditorInlineToolbar className="mt-2 flex gap-2">
	{/* inline triggers like bold, italic, link… */}
</EditorInlineToolbar>
```
Mix and match triggers for the UX you need.

### Props Reference
| Name | Type | Required | Default | Description |
| --- | --- | --- | --- | --- |
| field | string &#124; object | Yes | — | Field that stores the serialized editor content. |
| referencesField | string &#124; object | Yes | — | Field that stores related entity references. |
| referenceDiscriminationField | string &#124; object | Yes | — | Field that discriminates reference entity types. |
| plugins | EditorPlugin[] | No | `[]` | Array of plugin factory functions. |
| placeholder | string | No | `""` | Placeholder text for an empty editor. |
| children | React.ReactNode | No | — | Toolbar and block definitions rendered inside the editor. |

_Inherited props_: _None_

### Sub‑Components / Building Blocks
#### EditorBlock
Defines a block, its label, and internal content.

#### EditorBlockToolbar
Horizontal toolbar for block‑level triggers.

#### EditorInlineToolbar
Toolbar that appears for inline formatting.

#### EditorReferenceTrigger
Button that inserts a reference block.

#### EditorElementTrigger
Button that inserts or toggles a custom element.

#### EditorMarkTrigger
Button that toggles a text mark (bold, italic …).

#### EditorGenericTrigger
Generic trigger for arbitrary editor commands.

### Examples
#### Full toolbar with custom plugins
```tsx
<BlockEditorField
	field="data"
	referencesField="references"
	referenceDiscriminationField="type"
	plugins={[
		editor => editor.registerElement({ type: 'link', isInline: true, render: LinkElement }),
	]}
>
	<EditorBlockToolbar className="flex gap-2 border-b pb-2">
		<EditorReferenceTrigger referenceType="image">
			<BlockButton><ImageIcon /> Image</BlockButton>
		</EditorReferenceTrigger>
		<EditorElementTrigger elementType={tableElementType}>
			<BlockButton><TableIcon /> Table</BlockButton>
		</EditorElementTrigger>
	</EditorBlockToolbar>

	<EditorInlineToolbar className="mt-2 flex gap-2">
		<EditorMarkTrigger mark={boldMark}><Toggle>B</Toggle></EditorMarkTrigger>
		<EditorMarkTrigger mark={italicMark}><Toggle>I</Toggle></EditorMarkTrigger>
	</EditorInlineToolbar>

	<EditorBlock name="quote" label="Quote">
		<EditorBlockContent />
	</EditorBlock>

	<EditorBlock name="image" label="Image">
		<ImageField baseField="image" urlField="url" />
	</EditorBlock>
</BlockEditorField>
```
This setup provides image references, tables, bold/italic marks, and a quote block.

#### Rich editor with embeds
```tsx
<BlockEditorField
	field="blocks"
	referencesField="references"
	referenceDiscriminationField="type"
	plugins={[plugins.heading, plugins.list, plugins.bold /* … */]}
>
	{/* toolbars identical to previous example */}

	<Block discriminateBy="embed" label="Embed">
		<Block discriminateBy="youtube" label="YouTube" />
		<Block discriminateBy="vimeo" label="Vimeo" />
	</Block>
</BlockEditorField>
```
You can nest blocks to build complex embed workflows such as grouped video providers.

### Best Practices & Gotchas
* Always pass `referencesField` and `referenceDiscriminationField`; the editor fails without them.  
* Keep `plugins` pure; avoid side effects outside the Slate editor instance.  
* Wrap toolbar buttons in Contember triggers; plain buttons will not modify the editor.  
* Store only serializable data in `field`; avoid functions or DOM nodes.  
* Use Tailwind utilities like `prose` to style the output consistently.  
* Re‑rendering the parent component resets toolbar selection; memoize large toolbars if needed.

### Further Reading
* EditorBlock  
* EditorInlineToolbar  
* RichTextField & RichTextView  
* Contember Slate Plugin API  

<!-- End of Generated Documentation -->