---
title: IdentityLoader
---

<!-- Edited by human: false -->
<!-- Examples count: 6 -->
<!-- Source examples: 1 -->
<!-- Playground examples: 1 -->
<!-- External examples: 4 -->
<!-- Import examples: 5 -->

## Overview
`IdentityLoader` manages user-identity loading inside your React app.  
It shows nothing until the identity is fetched, then renders children or a fallback UI on failure.

The component centralises authentication state so you avoid manual loading checks in every view.

## Styling Guidelines
* All examples use TailwindCSS classes.
* No special Contember theme classes are required.

## Core Concepts
* Identity status can be loading, error, or ready.
* The component blocks rendering until identity is ready.
* It forwards no visual props—styling happens inside your children.
* Place it high in the tree, usually around global layout.

## Quick Start
```tsx
import { IdentityLoader } from '~/lib/binding'
import { Dashboard } from './Dashboard'

export default function App() {
	return (
		<IdentityLoader>
			<main className="p-6">
				<Dashboard />
			</main>
		</IdentityLoader>
	)
}
```

## Detailed Guide
```tsx
// 1. Wrap your global layout
<IdentityLoader>
	<LayoutComponent>
		{/* 2. Insert slots or pages */}
		<PageRoutes />
	</LayoutComponent>
</IdentityLoader>

// 3. Handle unauthenticated state inside pages if needed
```

## Props Reference
| Name | Type | Required | Default | Description |
|------|------|----------|---------|-------------|
| children | React.ReactNode | Yes | – | The content you want to protect until identity is loaded |

_Inherited props: none_

## Sub-Components / Building Blocks
_None_

## Examples
### Minimal wrapper
```tsx
<IdentityLoader>
  <Dashboard />
</IdentityLoader>
```
Use this pattern for simple apps that only need to protect a single screen.

### Playground layout with slots
```tsx
({ children }: PropsWithChildren) => (
	<IdentityLoader>
		<LayoutComponent>
			<Slots.Logo>
				<Link to="index">
					<Logo />
				</Link>
			</Slots.Logo>

			<Slots.Navigation>
				<Navigation />
			</Slots.Navigation>

			<Slots.UserNavigation>
				<UserNavigation />
			</Slots.UserNavigation>

			<Slots.Footer>
				<p>
					<small>Created with <a className="content-link" href="https://www.contember.com/">AI-assisted Contember Studio</a></small>
				</p>
			</Slots.Footer>

			<Slots.Sidebar>
				<SidebarHeader>
					<h1>Header</h1>
				</SidebarHeader>
				<SidebarContent>
					<SidebarGroup>
						<SidebarGroupContent>
							content
						</SidebarGroupContent>
					</SidebarGroup>
				</SidebarContent>
				<SidebarFooter>
					footer
				</SidebarFooter>
			</Slots.Sidebar>

			{children}
		</LayoutComponent>
	</IdentityLoader>
)
```
This example mirrors the Contember Playground. `IdentityLoader` surrounds the full slot-based layout, guaranteeing all slots receive identity information before rendering.

### Learning platform – sidebar application
```tsx
({ children }: PropsWithChildren) => {
	const env = useEnvironment()
	const request = useCurrentRequest()
	const isPortal = request?.pageName?.startsWith('portal/')
	const company = env.getDimensionOrElse('company', []).join(',')

	return (
		<IdentityLoader>
			<AppInit>
				<LayoutSidebarComponent>
					<Slots.Logo>
						<Link to={isPortal ? 'portal/dashboard' : 'dashboard'}>
							<a>
								<Logo />
							</a>
						</Link>
					</Slots.Logo>
					<Binding key={company}>
						<Slots.Account>
							<BillingNotification />
						</Slots.Account>
						<Slots.WorkSpace>
							<CompanySwitcher />
						</Slots.WorkSpace>
						<Slots.UserProfile>
							<div className="flex flex-col gap-2">
								<UserProfile />
								<DimensionsSwitcher dimension="locale" options="Locale" slugField="code" isMulti={!isPortal} optionsField={<LocalePreview />}>
									<LocalePreview showCode={false} />
								</DimensionsSwitcher>
							</div>
						</Slots.UserProfile>
						{children}
					</Binding>
					<Slots.Navigation>
						<MenuPortalSwitcher isPortal={isPortal ?? false} />
						{isPortal ? <PortalNavigation /> : <Navigation />}
					</Slots.Navigation>
				</LayoutSidebarComponent>
			</AppInit>
		</IdentityLoader>
	)
}
```
The platform hosts both portal and main dashboards. `IdentityLoader` wraps `AppInit`, ensuring identity is ready before environment or bindings mount.

### Learning platform – simple layout
```tsx
({ children }: PropsWithChildren<{}>) => (
	<IdentityLoader>
		<LayoutComponent>
			<Slots.Logo>
				<Link to="index">
					<Logo className="w-full max-w-[10rem]" />
				</Link>
			</Slots.Logo>

			<Slots.Navigation>
				<Navigation />
			</Slots.Navigation>

			<Slots.Switchers>
				<Binding>
					<MainSwitcher />
				</Binding>
			</Slots.Switchers>

			{children}
		</LayoutComponent>
	</IdentityLoader>
)
```
Here `IdentityLoader` covers a smaller slot set. The pattern is identical—load identity first, then mount the UI tree.

### 108 Agency CRM – portal aware sidebar
```tsx
({ children }: PropsWithChildren) => {
	const env = useEnvironment()
	const request = useCurrentRequest()
	const isPortal = request?.pageName?.startsWith('portal/')
	const company = env.getDimensionOrElse('company', []).join(',')

	return (
		<IdentityLoader>
			<AppInit>
				<LayoutSidebarComponent>
					<Slots.Logo>
						<Link to={isPortal ? 'portal/dashboard' : 'dashboard'}>
							<a>
								<Logo />
							</a>
						</Link>
					</Slots.Logo>
					<Binding key={company}>
						<Slots.Account>
							<BillingNotification />
						</Slots.Account>
						<Slots.WorkSpace>
							<CompanySwitcher />
						</Slots.WorkSpace>
						<Slots.UserProfile>
							<div className="flex flex-col gap-2">
								<UserProfile />
								<DimensionsSwitcher dimension="locale" options="Locale" slugField="code" isMulti={!isPortal} optionsField={<LocalePreview />}>
									<LocalePreview showCode={false} />
								</DimensionsSwitcher>
							</div>
						</Slots.UserProfile>
						{children}
					</Binding>
					<Slots.Navigation>
						<MenuPortalSwitcher isPortal={isPortal ?? false} />
						{isPortal ? <PortalNavigation /> : <Navigation />}
					</Slots.Navigation>
				</LayoutSidebarComponent>
			</AppInit>
		</IdentityLoader>
	)
}
```
This CRM shares logic with the learning platform. It shows how teams reuse the `IdentityLoader` pattern across products.

### 108 Agency CMS – concise wrapper
```tsx
({ children }: PropsWithChildren<{}>) => (
	<IdentityLoader>
		<LayoutComponent>
			<Slots.Logo>
				<Link to="index">
					<Logo className="w-full max-w-[10rem]" />
				</Link>
			</Slots.Logo>

			<Slots.Navigation>
				<Navigation />
			</Slots.Navigation>

			<Slots.Switchers>
				<Binding>
					<MainSwitcher />
				</Binding>
			</Slots.Switchers>

			{children}
		</LayoutComponent>
	</IdentityLoader>
)
```
Even when the slot set shrinks, you keep `IdentityLoader` at the top to guarantee a consistent identity-first render flow.

## Best Practices & Gotchas
* Place `IdentityLoader` once at the top; nesting offers no benefit.
* Do not render it conditionally; mount it immediately.
* Keep heavyweight loading indicators inside your layout, not in `IdentityLoader`.
* Remember that children may render `null` while loading; design layouts accordingly.

## Further Reading
* Contember authentication guide
* `useIdentity` hook (library helper)
* Layout and slots pattern in Contember

<!-- End of Generated Documentation -->